{extend name="public/videobase"/}
{block name="body"}
<div class="container-fiuld">
    {switch name="$JPlayer"}
        {case value="1"}
            <div class="col-xs-12 thumbnail">
                <img src="__PUBLIC__static/home/img/videocover1.jpg">
            </div>
        {/case}
        {case value="0"}
        <div class="col-xs-12" id="J_prismPlayer"></div>
        <script type="text/javascript">
            var player = new Aliplayer({
             id: 'J_prismPlayer',
             source: "{$url}",//播放地址，可以是第三方点播地址，或阿里云点播服务中的播放地址。
             keyShortCuts:false,
             controlBarVisibility:"never",
             cover:"__PUBLIC__static/home/img/videocover1.jpg",
             components: [{
              name: 'MemoryPlayComponent',
              type: AliPlayerComponent.MemoryPlayComponent,
              autoPlay: true,
              /* Set the first parameter to true to enable auto play. The default is false. */
              // args: [true，getTime,saveTime]
             }]
             },function(player){
                console.log('The player is created.')
             });

            var handleEnded = function(e)
            {
                layer.msg('视频观看完成', {icon: 1}, function(){
                    $.post('{:url("video/getClassnum")}',{vid:{$vid}}, function(msg){
                        window.location.href = location.href;
                    }, 'json'); 
                });
            }
            player.on('ended',handleEnded); 
            </script>
        {/case}
        {default /}
    {/switch}
    <div class="col-xs-12" style="margin: 10px 0;">
        <div class="col-xs-12" style="padding: 0;">
            <div class="col-xs-12" style="padding: 0;margin: 5px 0;"><h5 style="color:#2b333b;font-size: 16px">第1章 红十字运动</h5></div>
            <div class="col-xs-12 dzvideo">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>11))}">
                <div class="col-xs-12" id="v11" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  1-红十字运动
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
        </div>  
        <div class="col-xs-12" style="padding: 0;">
            <div class="col-xs-12" style="padding: 0;margin: 5px 0;"><h5 style="color:#2b333b;font-size: 16px">第2章 救护概论</h5></div>
            <div class="col-xs-12 dzvideo">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>21))}">
                <div class="col-xs-12" id="v21" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  1-现场救护定义、目的和原则
                <i class="layui-icon layui-icon-lock dzvideoright" ></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>22))}">
                <div class="col-xs-12" id="v22" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  2-现场救护流程和注意事项
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
        </div>   
        <div class="col-xs-12" style="padding: 0;">
            <div class="col-xs-12" style="padding: 0;margin: 5px 0;"><h5 style="color:#2b333b;font-size: 16px">第3章 心肺复苏</h5></div>
            <div class="col-xs-12 dzvideo">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>31))}">
                <div class="col-xs-12" id="v31" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  1-施救案例
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>32))}">
                <div class="col-xs-12" id="v32" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  2-基础知识
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>33))}">
                <div class="col-xs-12" id="v33" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  3-识别心搏骤停和呼救
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>34))}">
                <div class="col-xs-12" id="v34" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  4-胸外按压、打开气道和人工呼吸
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>35))}">
                <div class="col-xs-12" id="v35" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r" ></i>  5-相关注意事项
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>36))}">
                <div class="col-xs-12" id="v36" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  6-成人、儿童和婴儿心肺复苏操作流程
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>37))}">
                <div class="col-xs-12" id="v37" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r" ></i>  7-自动体外除颤器（AED）
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
        </div>   
        <div class="col-xs-12" style="padding: 0;">
            <div class="col-xs-12" style="padding: 0;margin: 5px 0;"><h5 style="color:#2b333b;font-size: 16px">第4章 气道异物梗阻</h5></div>
            <div class="col-xs-12 dzvideo">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>41))}">
                <div class="col-xs-12" id="v41" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  1-概述
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>42))}">
                <div class="col-xs-12" id="v42" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  2-成人及儿童现场急救
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>43))}">
                <div class="col-xs-12" id="v43" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  3-婴儿现场急救及成人自救
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
        </div>    
        <div class="col-xs-12" style="padding: 0;">
            <div class="col-xs-12" style="padding: 0;margin: 5px 0;"><h5 style="color:#2b333b;font-size: 16px">第5章 创伤救护</h5></div>
            <div class="col-xs-12 dzvideo">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>51))}">
                <div class="col-xs-12" id="v51" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  1-基础知识
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>52))}">
                <div class="col-xs-12" id="v52" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  2-止血
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>53))}">
                <div class="col-xs-12" id="v53" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  3-绷带包扎
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>54))}">
                <div class="col-xs-12" id="v54" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  4-三角巾包扎
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>55))}">
                <div class="col-xs-12" id="v55" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  5-骨折概述
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>56))}">
                <div class="col-xs-12" id="v56" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  6-骨折固定
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>57))}">
                <div class="col-xs-12" id="v57" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  7-伤病员搬运
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
            <div class="col-xs-12 dzvideom15">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>58))}">
                <div class="col-xs-12" id="v58" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  8-特殊处理
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
        </div> 
        <div class="col-xs-12" style="padding: 0;">
            <div class="col-xs-12" style="padding: 0;margin: 5px 0;"><h5 style="color:#2b333b;font-size: 16px">第6章 常见急症与避险逃生</h5></div>
            <div class="col-xs-12 dzvideo">
                <a style="color:#000;text-decoration:none;" href="{:url('/video',array('vid'=>61))}">
                <div class="col-xs-12" id="v61" style="padding-top: 10px;">
                <i class="layui-icon layui-icon-triangle-r"></i>  1-常见急症与避险逃生
                <i class="layui-icon layui-icon-lock dzvideoright"></i> 
                </div>
                </a>
            </div>
        </div>
    </div>
    <div class="col-xs-12" style="margin:20px 0 30px 0;"><button type="button" class="layui-btn layui-btn-fluid layui-btn-lg" onclick="takeexam()">进行理论考试</button></div>

</div>
<script type="text/javascript">
    layui.use(function(){
      var util = layui.util;
      // 自定义固定条
      util.fixbar({
        bars: [
          {
            type: 'score', // bar 类型名，用于事件区分
            icon: 'layui-icon-survey', // bar 图标的 className
          },
        ],  
        bgcolor: '#16baaa', // bar 的默认背景色      
        // 点击事件
        click: function(type){
          // console.log(this, type);
          if(type == "score"){window.location.href = "/scoreimglast";}
        }
      });
    });
    $(document).ready(function(){
        $("#v{$vid}").addClass("dzgreen").children("i").eq(1).addClass("layui-icon-radio dzonvideo").removeClass("layui-icon-lock");
        $.each({$limits_arr}, function(idx, item) {
            $("#v"+item).children("i").eq(1).addClass("layui-icon-success dzonvideo").removeClass("layui-icon-lock");
            $("#v"+item).parent("a").attr("href","javascript:void(0)");
        });
    }); 
    function takeexam(){
        const num = $(".layui-icon-success").length;
        if(num >= 21){
            $.post("{:url('video/takeexam')}", function(msg){
                if(msg == "success"){
                    window.location.href = "/theory";
                }else{layer.msg("请看完所有课程！");}   
            }, 'json');
        }else{
            layer.msg("请看完所有课程！");
        }       
    }
    function dumptext(){
        window.location.href = "/theory";
    }
</script>
{/block}
